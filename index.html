<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered Workforce Learning System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: bold;
            color: #4f46e5;
        }

        .logo-icon {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px;
            border-radius: 12px;
            font-size: 1.2rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .persona-switcher {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .persona-switcher:hover {
            border-color: #4f46e5;
            transform: translateY(-2px);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Main Layout */
        .main-layout {
            display: flex;
            min-height: calc(100vh - 80px);
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            padding: 2rem 0;
            overflow-y: auto;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
        }

        .nav-section {
            margin-bottom: 2rem;
        }

        .nav-section h3 {
            color: #64748b;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 0 1.5rem;
            margin-bottom: 1rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 1.5rem;
            color: #475569;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 4px solid transparent;
        }

        .nav-item:hover {
            background: rgba(99, 102, 241, 0.1);
            color: #4f46e5;
            border-left-color: #4f46e5;
            transform: translateX(4px);
        }

        .nav-item.active {
            background: rgba(99, 102, 241, 0.15);
            color: #4f46e5;
            border-left-color: #4f46e5;
            font-weight: 600;
        }

        .nav-item .icon {
            width: 20px;
            height: 20px;
            font-size: 16px;
        }

        /* Content Area */
        .content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .content-header {
            margin-bottom: 2rem;
        }

        .content-title {
            font-size: 2rem;
            font-weight: bold;
            color: white;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .content-subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
        }

        /* Dashboard Cards */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        .card-full {
             grid-column: 1 / -1;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 1rem;
        }

        .card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0.5rem 0;
        }

        .metric-label {
            color: #64748b;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .metric-change {
            font-size: 0.85rem;
            padding: 4px 8px;
            border-radius: 6px;
            font-weight: 500;
        }

        .positive { background: #dcfce7; color: #166534; }
        .negative { background: #fecaca; color: #dc2626; }
        .warning { background: #fef3c7; color: #d97706; }

        /* Progress Bars */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-green { background: linear-gradient(90deg, #10b981, #34d399); }
        .progress-blue { background: linear-gradient(90deg, #3b82f6, #60a5fa); }
        .progress-purple { background: linear-gradient(90deg, #8b5cf6, #a78bfa); }
        .progress-orange { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
        .progress-red { background: linear-gradient(90deg, #ef4444, #f87171); }

        /* AI Insights */
        .ai-insights {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .ai-insights h3 {
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .insight-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            backdrop-filter: blur(10px);
        }

        .insight-item:last-child {
            margin-bottom: 0;
        }

        /* Persona-specific content visibility */
        .persona-content {
            display: none;
        }

        .persona-content.active {
            display: block;
        }

        /* Hidden by default */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.6s ease-out;
        }

        /* Course Registration Styles */
        .course-item {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .course-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .course-item.online {
            border-left-color: #10b981;
        }

        .course-item.in-person {
            border-left-color: #3b82f6;
        }

        .course-item.hybrid {
            border-left-color: #8b5cf6;
        }

        .course-header {
            display: flex;
            justify-content: between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .course-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .course-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-right: 8px;
            margin-bottom: 8px;
        }

        .badge-online {
            background: #dcfce7;
            color: #166534;
        }

        .badge-in-person {
            background: #dbeafe;
            color: #1e40af;
        }

        .badge-hybrid {
            background: #f3e8ff;
            color: #7c3aed;
        }

        .badge-available {
            background: #dcfce7;
            color: #166534;
        }

        .badge-full {
            background: #fee2e2;
            color: #dc2626;
        }

        .badge-waitlist {
            background: #fef3c7;
            color: #d97706;
        }

        .course-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: #64748b;
        }

        .detail-icon {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }

        .course-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            justify-content: flex-end;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #475569;
        }
        
        .btn-secondary:hover {
            background: #dbeafe;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        /* Registration Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: fadeInScale 0.3s ease-out;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e9ecef;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6c757d;
            transition: color 0.2s ease;
        }

        .close-btn:hover {
            color: #2c3e50;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        
        .form-control[readonly] {
            background-color: #f3f4f6;
            cursor: not-allowed;
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.5rem;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .alternatives-list {
            max-height: 400px;
            overflow-y: auto;
            margin: 1rem 0;
        }

        .alternative-item {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .alternative-item:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .ai-score {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .match-reasons {
            background: #f8fafc;
            border-radius: 6px;
            padding: 0.75rem;
            margin-top: 0.75rem;
        }

        .match-reasons ul {
            margin: 0;
            padding-left: 1.25rem;
            font-size: 0.9rem;
            color: #64748b;
        }

        .notification-bar {
            position: fixed;
            top: 100px;
            right: 20px;
            max-width: 400px;
            z-index: 1001;
        }

        .notification {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border-left: 4px solid #10b981;
            animation: slideIn 0.3s ease-out;
        }

        .notification.warning {
            border-left-color: #f59e0b;
        }

        .notification.error {
            border-left-color: #ef4444;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Filter and Search */
        .filter-bar {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .filter-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr auto;
            gap: 1rem;
            align-items: end;
        }

        .search-input {
            position: relative;
        }

        .search-input input {
            padding-left: 2.5rem;
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
            font-size: 1.1rem;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }
            .main-layout {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                padding: 1rem 0;
                box-shadow: none;
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                padding: 1.5rem;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }

            .filter-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .course-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Notification Bar -->
    <div id="notification-bar" class="notification-bar"></div>

    <!-- Header -->
    <div class="header">
        <div class="logo">
            <div class="logo-icon">🧠</div>
            <span>AI Learning Hub</span>
        </div>
        
        <div class="user-info">
            <select class="persona-switcher" id="personaSwitcher" onchange="switchPersona()">
                <option value="sales">💼 Sales Consultant</option>
                <option value="technician">🔧 Technician</option>
                <option value="trainer">🎓 Trainer</option>
                <option value="manager">👔 Manager</option>
                <option value="compliance">⚖️ Compliance Officer</option>
                <option value="hr">👥 HR Business Partner</option>
                <option value="it">💻 IT Administrator</option>
                <option value="executive">🎯 Executive</option>
            </select>
            <div class="user-avatar" id="userAvatar">AC</div>
            <div>
                <div style="font-weight: 600; color: #1e293b;" id="userName">Alex Chen</div>
                <div style="font-size: 0.85rem; color: #64748b;" id="userRole">Customer Service Rep</div>
            </div>
        </div>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="nav-section">
                <h3>Core Dashboard</h3>
                <a class="nav-item active" onclick="showSection('dashboard', this)">
                    <span class="icon">📊</span>
                    Dashboard Overview
                </a>
            </div>

            <div class="nav-section" id="ld-nav-section">
                <h3>Learning & Development</h3>
                <a class="nav-item" onclick="showSection('recommendations', this)">
                    <span class="icon">🎯</span>
                    AI Recommendations
                </a>
                <a class="nav-item" onclick="showSection('learning-path', this)">
                    <span class="icon">🛤️</span>
                    My Learning Path
                </a>
                <a class="nav-item" onclick="showSection('course-catalog', this)">
                    <span class="icon">📚</span>
                    Course Catalog & Registration
                </a>
                <a class="nav-item" onclick="showSection('my-registrations', this)">
                    <span class="icon">📝</span>
                    My Registrations
                </a>
                <a class="nav-item" onclick="showSection('training-gaps', this)">
                    <span class="icon">📈</span>
                    Training & Compliance
                </a>
            </div>

            <div class="nav-section" id="analytics-nav-section">
                <h3>Analytics & Insights</h3>
                <a class="nav-item" onclick="showSection('top-performers', this)">
                    <span class="icon">🏆</span>
                    Top Performer Analysis
                </a>
                <a class="nav-item" onclick="showSection('analytics', this)">
                    <span class="icon">📊</span>
                    Learning Analytics
                </a>
            </div>

            <div class="nav-section">
                <h3>Profile & Settings</h3>
                <a class="nav-item" onclick="showSection('user-profile', this)">
                    <span class="icon">👤</span>
                    User Profile
                </a>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content">
        
            <!-- Dashboard Section -->
            <div id="dashboard" class="content-section active">
                <div class="content-header">
                    <h1 class="content-title">Welcome back, <span id="dashboardUserName">Alex</span>! 👋</h1>
                    <p class="content-subtitle">Your personalized dashboard powered by AI insights</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #dcfce7; color: #166534;">💰</div>
                            <div class="card-title">Sales Performance</div>
                        </div>
                        <div class="metric-value" style="color: #166534;">124%</div>
                        <div class="metric-label">Quota Achievement</div>
                        <div class="metric-change positive">🎯 Above target!</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #fef3c7; color: #d97706;">📚</div>
                            <div class="card-title">Course Progress</div>
                        </div>
                        <div class="metric-value" style="color: #d97706;">3</div>
                        <div class="metric-label">Active Enrollments</div>
                        <div class="metric-change positive">+2 this week</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #dbeafe; color: #1e40af;">🎮</div>
                            <div class="card-title">Leaderboard</div>
                        </div>
                        <div class="metric-value" style="color: #1e40af;">#3</div>
                        <div class="metric-label">Team Ranking</div>
                        <div class="metric-change positive">🔥 Moving up!</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #fef9c3; color: #ca8a04;">📅</div>
                            <div class="card-title">Upcoming Classes</div>
                        </div>
                        <div class="metric-value" style="color: #ca8a04;">2</div>
                        <div class="metric-label">This Week</div>
                        <div class="metric-change warning">Tomorrow at 2 PM</div>
                    </div>
                </div>

                <div class="ai-insights">
                    <h3>🤖 AI Learning Assistant</h3>
                    <div class="insight-item">
                        <strong>Registration Alert:</strong> The "Advanced Negotiation" course you waitlisted has 2 spots available. Register now!
                    </div>
                    <div class="insight-item">
                        <strong>Optimal Schedule:</strong> Based on your performance patterns, Tuesday morning classes show 40% better completion rates.
                    </div>
                    <div class="insight-item">
                        <strong>Skill Recommendation:</strong> Your CRM usage improved 15% after the last training. Consider enrolling in "Advanced CRM Analytics."
                    </div>
                </div>
            </div>
            
            <!-- Course Catalog Section -->
            <div id="course-catalog" class="content-section">
                <div class="content-header">
                    <h1 class="content-title">📚 Course Catalog & Registration</h1>
                    <p class="content-subtitle">AI-enhanced training discovery with intelligent scheduling</p>
                </div>

                <div class="filter-bar">
                    <div class="filter-grid">
                        <div class="search-input">
                            <span class="search-icon">🔍</span>
                            <input type="text" class="form-control" placeholder="Search courses, skills, or topics..." id="courseSearch">
                        </div>
                        <select class="form-control" id="categoryFilter">
                            <option value="all">All Categories</option>
                            <option value="technical">Technical Skills</option>
                            <option value="sales">Sales & Customer Service</option>
                            <option value="leadership">Leadership & Management</option>
                            <option value="compliance">Compliance & Safety</option>
                        </select>
                        <select class="form-control" id="deliveryFilter">
                            <option value="all">All Delivery Methods</option>
                            <option value="online">Online Only</option>
                            <option value="in-person">In-Person Only</option>
                            <option value="hybrid">Hybrid Options</option>
                        </select>
                        <button class="btn btn-primary" onclick="applyCourseFilters()">
                            <span>🔍</span>
                            Search
                        </button>
                    </div>
                </div>

                <div id="courseList">
                    <!-- Courses will be populated by JavaScript -->
                </div>
            </div>

            <!-- My Registrations Section -->
            <div id="my-registrations" class="content-section">
                <div class="content-header">
                    <h1 class="content-title">📝 My Registrations</h1>
                    <p class="content-subtitle">Track your current and upcoming training sessions</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #dcfce7; color: #166534;">✅</div>
                            <div class="card-title">Active Enrollments</div>
                        </div>
                        <div class="metric-value" style="color: #166534;">3</div>
                        <div class="metric-label">Current Courses</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #fef3c7; color: #d97706;">⏳</div>
                            <div class="card-title">Waitlisted</div>
                        </div>
                        <div class="metric-value" style="color: #d97706;">1</div>
                        <div class="metric-label">Waiting for Spots</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #dbeafe; color: #1e40af;">🏆</div>
                            <div class="card-title">Completed</div>
                        </div>
                        <div class="metric-value" style="color: #1e40af;">8</div>
                        <div class="metric-label">This Quarter</div>
                    </div>
                </div>

                <div id="registrationsList">
                    <!-- Registration details will be populated by JavaScript -->
                </div>
            </div>

            <!-- AI Recommendations Section -->
            <div id="recommendations" class="content-section">
                <div class="content-header">
                    <h1 class="content-title">🎯 AI Recommendations</h1>
                    <p class="content-subtitle">Dynamically suggested by AI for your role, behavior, and goals.</p>
                </div>

                <div class="ai-insights">
                    <h3>🤖 AI Learning Coach</h3>
                    <div class="insight-item">
                        <strong>Performance Correlation:</strong> Your closing rate improves 28% after objection handling refreshers.
                    </div>
                    <div class="insight-item">
                        <strong>CRM Usage:</strong> Your pipeline accuracy increased 15% this month.
                    </div>
                    <div class="insight-item">
                        <strong>Product Alert:</strong> New model launching next week - training recommended.
                    </div>
                </div>

                <div id="recommendations-list">
                    <!-- Will be populated by JavaScript based on persona -->
                </div>
            </div>

            <!-- Learning Path Section -->
            <div id="learning-path" class="content-section">
                <div class="content-header">
                    <h1 class="content-title">🛤️ My Learning Path</h1>
                    <p class="content-subtitle">Structured learning sequences based on your role, job level, and milestones.</p>
                </div>

                <div id="learning-path-content">
                    <!-- Will be populated by JavaScript based on persona -->
                </div>
            </div>

            <!-- Training & Compliance Section -->
            <div id="training-gaps" class="content-section">
                <div class="content-header">
                    <h1 class="content-title">📈 Training & Compliance</h1>
                    <p class="content-subtitle">Required, regulatory, and dealership-specific compliance training.</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #dcfce7; color: #166534;">✅</div>
                            <div class="card-title">Compliance Rate</div>
                        </div>
                        <div class="metric-value" style="color: #166534;">92%</div>
                        <div class="metric-label">Current Quarter</div>
                        <div class="metric-change positive">+5% from last quarter</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #fee2e2; color: #dc2626;">⚠️</div>
                            <div class="card-title">Overdue Training</div>
                        </div>
                        <div class="metric-value" style="color: #dc2626;">2</div>
                        <div class="metric-label">Courses</div>
                        <div class="metric-change negative">Action required</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #fef3c7; color: #d97706;">📅</div>
                            <div class="card-title">Upcoming Deadlines</div>
                        </div>
                        <div class="metric-value" style="color: #d97706;">3</div>
                        <div class="metric-label">Next 30 Days</div>
                        <div class="metric-change warning">Schedule soon</div>
                    </div>
                </div>

                <div id="compliance-training-list">
                    <!-- Will be populated by JavaScript based on persona -->
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="analytics" class="content-section">
                <div class="content-header">
                    <h1 class="content-title">📊 Learning Analytics</h1>
                    <p class="content-subtitle">Insights for performance optimization and learning effectiveness</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #dbeafe; color: #1e40af;">📈</div>
                            <div class="card-title">Learning Velocity</div>
                        </div>
                        <div class="metric-value" style="color: #1e40af;">4.2</div>
                        <div class="metric-label">Hours/Week</div>
                        <div class="metric-change positive">+1.2 vs average</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #dcfce7; color: #166534;">🎯</div>
                            <div class="card-title">Retention Rate</div>
                        </div>
                        <div class="metric-value" style="color: #166534;">87%</div>
                        <div class="metric-label">Knowledge Retention</div>
                        <div class="metric-change positive">Top 10% performer</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #f3e8ff; color: #7c3aed;">⭐</div>
                            <div class="card-title">Engagement Score</div>
                        </div>
                        <div class="metric-value" style="color: #7c3aed;">9.1</div>
                        <div class="metric-label">Out of 10</div>
                        <div class="metric-change positive">Highly engaged</div>
                    </div>
                </div>

                <div class="card card-full">
                    <h3 class="card-title">🔍 Learning Habits Analysis</h3>
                    <div style="margin-bottom: 1.5rem;">
                        <h4 style="color: #374151; margin-bottom: 1rem;">Peak Learning Times</h4>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem;">
                            <span class="course-badge" style="background: #dbeafe; color: #1e40af;">Tuesday 9:00-11:00 AM</span>
                            <span class="course-badge" style="background: #dcfce7; color: #166534;">Wednesday 2:00-4:00 PM</span>
                            <span class="course-badge" style="background: #fef3c7; color: #d97706;">Thursday 10:00 AM-12:00 PM</span>
                        </div>
                        
                        <h4 style="color: #374151; margin-bottom: 1rem;">Preferred Learning Formats</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                                    <span>Interactive Simulations</span>
                                    <span style="font-weight: 600;">92%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill progress-blue" style="width: 92%;"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                                    <span>Video Tutorials</span>
                                    <span style="font-weight: 600;">78%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill progress-green" style="width: 78%;"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                                    <span>Reading Materials</span>
                                    <span style="font-weight: 600;">64%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill progress-orange" style="width: 64%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Top Performers Section -->
            <div id="top-performers" class="content-section">
                <div class="content-header">
                    <h1 class="content-title">🏆 Top Performer Analysis</h1>
                    <p class="content-subtitle">AI-powered insights from high-performing team members</p>
                </div>

                <div class="card card-full">
                    <h3 class="card-title">📊 Performance Benchmarks</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <div style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">🥇</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: #166534;">94%</div>
                            <div style="color: #64748b;">Top 10% Avg Training Completion</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">⚡</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: #1e40af;">2.8x</div>
                            <div style="color: #64748b;">Faster Skill Acquisition Rate</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">🎯</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: #7c3aed;">87%</div>
                            <div style="color: #64748b;">Apply Learning Immediately</div>
                        </div>
                    </div>
                    
                    <div class="ai-insights">
                        <h3>🤖 AI Performance Insights</h3>
                        <div class="insight-item">
                            <strong>Pattern Recognition:</strong> Top performers complete training 48 hours before deadlines vs. 2 hours for average performers.
                        </div>
                        <div class="insight-item">
                            <strong>Learning Behavior:</strong> High achievers spend 40% more time on practical exercises vs. theoretical content.
                        </div>
                        <div class="insight-item">
                            <strong>Success Factor:</strong> Top performers seek feedback within 24 hours of completing training.
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Profile Section -->
            <div id="user-profile" class="content-section">
                <div class="content-header">
                    <h1 class="content-title">👤 User Profile & Personalization</h1>
                    <p class="content-subtitle">Customize experience • Track achievements • Manage preferences</p>
                </div>

                <div id="user-profile-content">
                    <!-- Will be populated by JavaScript based on persona -->
                </div>
            </div>
        </div>
    </div>

    <!-- Registration Modal -->
    <div id="registration-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Course Registration</h2>
                <button class="close-btn" onclick="closeRegistrationModal()">&times;</button>
            </div>
            
            <div id="modal-body">
                <!-- Modal content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // #################### DATA ####################
        const personaData = {
            sales: { 
                name: "Jordan Martinez", 
                role: "Sales Consultant", 
                avatar: "JM", 
                email: "jordan.martinez@company.com",
                manager: "Sarah Johnson",
                department: "Sales",
                performance: "124%"
            },
            technician: { 
                name: "Riley Thompson", 
                role: "Technician", 
                avatar: "RT", 
                email: "riley.thompson@company.com",
                manager: "Mike Chen",
                department: "Service",
                performance: "96%"
            },
            trainer: { 
                name: "David Kim", 
                role: "Trainer", 
                avatar: "DK", 
                email: "david.kim@company.com",
                manager: "Robert Davis",
                department: "Learning & Development",
                performance: "4.8/5"
            },
            manager: { 
                name: "Sarah Johnson", 
                role: "Manager", 
                avatar: "SJ", 
                email: "sarah.johnson@company.com",
                manager: "Robert Davis",
                department: "Operations",
                performance: "91%"
            },
            compliance: { 
                name: "Marcus Williams", 
                role: "Compliance Officer", 
                avatar: "MW", 
                email: "marcus.williams@company.com",
                manager: "Robert Davis",
                department: "Risk & Compliance",
                performance: "98%"
            },
            hr: { 
                name: "Lisa Rodriguez", 
                role: "HR Business Partner", 
                avatar: "LR", 
                email: "lisa.rodriguez@company.com",
                manager: "Robert Davis",
                department: "Human Resources",
                performance: "A+"
            },
            it: { 
                name: "Jennifer Chen", 
                role: "IT Administrator", 
                avatar: "JC", 
                email: "jennifer.chen@company.com",
                manager: "Robert Davis",
                department: "Information Technology",
                performance: "99.9%"
            },
            executive: { 
                name: "Robert Davis", 
                role: "Executive", 
                avatar: "RD", 
                email: "robert.davis@company.com",
                manager: "Board of Directors",
                department: "Executive Leadership",
                performance: "+15% YoY"
            }
        };

        // AI Recommendations data by persona
        const aiRecommendations = {
            sales: [
                {
                    title: "Advanced Objection Handling",
                    overview: "Master techniques for converting common customer objections into opportunities",
                    relevance: "Your closing rate improves 28% after objection handling training",
                    priority: "high",
                    estimatedTime: "2 hours",
                    format: "Interactive simulation"
                },
                {
                    title: "CRM Pipeline Optimization",
                    overview: "Leverage data analytics to improve lead qualification and follow-up",
                    relevance: "Your pipeline accuracy increased 15% with better CRM usage",
                    priority: "medium",
                    estimatedTime: "1.5 hours",
                    format: "Video + Practice"
                },
                {
                    title: "Digital Sales Tools Mastery",
                    overview: "Utilize modern digital tools for remote selling and customer engagement",
                    relevance: "Hybrid selling skills becoming essential for territory expansion",
                    priority: "medium",
                    estimatedTime: "3 hours",
                    format: "Hands-on workshop"
                },
                {
                    title: "Customer Psychology & Buying Behavior",
                    overview: "Understand psychological triggers that influence purchasing decisions",
                    relevance: "Top performers show 40% better customer reading skills",
                    priority: "high",
                    estimatedTime: "2.5 hours",
                    format: "Case studies + Role play"
                }
            ],
            technician: [
                {
                    title: "Advanced EV Diagnostics",
                    overview: "Master diagnostic procedures for electric and hybrid vehicle systems",
                    relevance: "EV service requests increased 150% in your region",
                    priority: "high",
                    estimatedTime: "4 hours",
                    format: "Hands-on lab"
                },
                {
                    title: "Digital Service Tools",
                    overview: "Leverage mobile apps and tablets for efficient service documentation",
                    relevance: "Digital-savvy techs complete jobs 25% faster",
                    priority: "medium",
                    estimatedTime: "2 hours",
                    format: "Interactive demo"
                },
                {
                    title: "Customer Communication for Technicians",
                    overview: "Improve technical explanation skills for better customer satisfaction",
                    relevance: "Your CSI scores can improve with better communication",
                    priority: "medium",
                    estimatedTime: "1.5 hours",
                    format: "Video + Practice scenarios"
                }
            ],
            manager: [
                {
                    title: "AI-Powered Team Analytics",
                    overview: "Use data insights to optimize team performance and identify coaching opportunities",
                    relevance: "Managers using analytics show 35% better team performance",
                    priority: "high",
                    estimatedTime: "3 hours",
                    format: "Dashboard training"
                },
                {
                    title: "Remote Team Leadership",
                    overview: "Effective strategies for managing hybrid and remote teams",
                    relevance: "Essential for modern workforce management",
                    priority: "high",
                    estimatedTime: "2.5 hours",
                    format: "Interactive workshop"
                },
                {
                    title: "Performance Coaching Techniques",
                    overview: "Advanced coaching methods for difficult conversations and improvement plans",
                    relevance: "Your team engagement scores can improve with better coaching",
                    priority: "medium",
                    estimatedTime: "2 hours",
                    format: "Role-play + Feedback"
                }
            ],
            trainer: [
                {
                    title: "AI Content Creation Tools",
                    overview: "Leverage AI to create engaging, personalized learning content faster",
                    relevance: "Reduce content development time by 40% with AI assistance",
                    priority: "high",
                    estimatedTime: "3 hours",
                    format: "Hands-on workshop"
                },
                {
                    title: "Microlearning Design",
                    overview: "Create bite-sized learning modules for better retention and engagement",
                    relevance: "7-minute modules show 85% higher completion rates",
                    priority: "high",
                    estimatedTime: "2.5 hours",
                    format: "Design workshop"
                },
                {
                    title: "Learning Analytics & Measurement",
                    overview: "Track learning effectiveness and ROI with advanced analytics",
                    relevance: "Data-driven trainers show 60% better learner outcomes",
                    priority: "medium",
                    estimatedTime: "2 hours",
                    format: "Analytics deep-dive"
                }
            ],
            compliance: [
                {
                    title: "AI-Powered Risk Detection",
                    overview: "Use automated systems to identify compliance risks before they become issues",
                    relevance: "Proactive risk detection reduces violations by 70%",
                    priority: "high",
                    estimatedTime: "2.5 hours",
                    format: "System training"
                },
                {
                    title: "Regulatory Updates 2025",
                    overview: "Stay current with latest compliance requirements and industry changes",
                    relevance: "15 new regulations affect your industry this quarter",
                    priority: "high",
                    estimatedTime: "3 hours",
                    format: "Expert briefing"
                },
                {
                    title: "Digital Audit Trail Management",
                    overview: "Implement automated documentation for compliance tracking",
                    relevance: "Digital audits reduce manual effort by 60%",
                    priority: "medium",
                    estimatedTime: "2 hours",
                    format: "Process workshop"
                }
            ],
            hr: [
                {
                    title: "People Analytics Mastery",
                    overview: "Use data to predict turnover, identify high potentials, and optimize hiring",
                    relevance: "Analytics-driven HR decisions show 40% better outcomes",
                    priority: "high",
                    estimatedTime: "3.5 hours",
                    format: "Data workshop"
                },
                {
                    title: "AI-Enhanced Recruitment",
                    overview: "Leverage AI tools for candidate screening and bias reduction",
                    relevance: "AI screening reduces time-to-hire by 50%",
                    priority: "high",
                    estimatedTime: "2.5 hours",
                    format: "Tool demonstration"
                },
                {
                    title: "Employee Experience Design",
                    overview: "Create compelling employee journeys from hire to retire",
                    relevance: "Great EX companies see 25% higher employee engagement",
                    priority: "medium",
                    estimatedTime: "2 hours",
                    format: "Design thinking session"
                }
            ],
            it: [
                {
                    title: "AI System Integration",
                    overview: "Implement and manage AI tools across learning and business systems",
                    relevance: "AI integration reduces manual processes by 80%",
                    priority: "high",
                    estimatedTime: "4 hours",
                    format: "Technical workshop"
                },
                {
                    title: "Learning Platform Security",
                    overview: "Secure learning systems and protect sensitive training data",
                    relevance: "Security breaches in learning systems increased 200%",
                    priority: "high",
                    estimatedTime: "3 hours",
                    format: "Security deep-dive"
                },
                {
                    title: "API Management for Learning Systems",
                    overview: "Manage integrations between LMS, HRIS, and business systems",
                    relevance: "Better API management improves system reliability by 90%",
                    priority: "medium",
                    estimatedTime: "2.5 hours",
                    format: "Technical training"
                }
            ],
            executive: [
                {
                    title: "AI Strategy for Learning Organizations",
                    overview: "Develop enterprise AI strategy for competitive learning advantage",
                    relevance: "AI-first companies show 3x faster skill development",
                    priority: "high",
                    estimatedTime: "2 hours",
                    format: "Strategic briefing"
                },
                {
                    title: "Learning ROI & Business Impact",
                    overview: "Measure and communicate learning investment returns to stakeholders",
                    relevance: "Quantified learning ROI enables 50% more L&D investment",
                    priority: "high",
                    estimatedTime: "1.5 hours",
                    format: "Executive session"
                },
                {
                    title: "Future of Work Skills Planning",
                    overview: "Anticipate skill needs and prepare workforce for industry disruption",
                    relevance: "Proactive skill planning prevents 60% of skill gap crises",
                    priority: "medium",
                    estimatedTime: "2 hours",
                    format: "Strategic workshop"
                }
            ]
        };

        // Learning Paths by persona
        const learningPaths = {
            sales: {
                title: "Sales Mastery Path",
                description: "Comprehensive journey from product knowledge to advanced sales techniques",
                levels: [
                    {
                        name: "Foundation",
                        courses: [
                            { title: "Product Knowledge Fundamentals", status: "completed", progress: 100 },
                            { title: "Basic Sales Process", status: "completed", progress: 100 },
                            { title: "CRM Basics", status: "completed", progress: 100 }
                        ]
                    },
                    {
                        name: "Intermediate",
                        courses: [
                            { title: "Customer Needs Analysis", status: "current", progress: 75 },
                            { title: "Objection Handling", status: "pending", progress: 0 },
                            { title: "Negotiation Fundamentals", status: "pending", progress: 0 }
                        ]
                    },
                    {
                        name: "Advanced",
                        courses: [
                            { title: "Advanced Closing Techniques", status: "locked", progress: 0 },
                            { title: "Key Account Management", status: "locked", progress: 0 },
                            { title: "Sales Leadership", status: "locked", progress: 0 }
                        ]
                    }
                ]
            },
            technician: {
                title: "Technical Certification Path",
                description: "Progressive certification from basic maintenance to advanced diagnostics",
                levels: [
                    {
                        name: "Safety & Basics",
                        courses: [
                            { title: "Workplace Safety", status: "completed", progress: 100 },
                            { title: "Tool Familiarization", status: "completed", progress: 100 },
                            { title: "Basic Maintenance", status: "completed", progress: 100 }
                        ]
                    },
                    {
                        name: "Core Skills",
                        courses: [
                            { title: "Engine Diagnostics", status: "completed", progress: 100 },
                            { title: "Electrical Systems", status: "current", progress: 60 },
                            { title: "Transmission Service", status: "pending", progress: 0 }
                        ]
                    },
                    {
                        name: "Specialization",
                        courses: [
                            { title: "Hybrid/EV Systems", status: "pending", progress: 0 },
                            { title: "Advanced Diagnostics", status: "locked", progress: 0 },
                            { title: "Master Technician Cert", status: "locked", progress: 0 }
                        ]
                    }
                ]
            },
            manager: {
                title: "Leadership Development Path",
                description: "Build management skills from team leadership to strategic planning",
                levels: [
                    {
                        name: "Team Leadership",
                        courses: [
                            { title: "First-Time Manager", status: "completed", progress: 100 },
                            { title: "Team Communication", status: "completed", progress: 100 },
                            { title: "Basic Coaching", status: "current", progress: 80 }
                        ]
                    },
                    {
                        name: "Performance Management",
                        courses: [
                            { title: "Performance Reviews", status: "pending", progress: 0 },
                            { title: "Difficult Conversations", status: "pending", progress: 0 },
                            { title: "Team Analytics", status: "pending", progress: 0 }
                        ]
                    },
                    {
                        name: "Strategic Leadership",
                        courses: [
                            { title: "Strategic Planning", status: "locked", progress: 0 },
                            { title: "Change Management", status: "locked", progress: 0 },
                            { title: "Executive Presence", status: "locked", progress: 0 }
                        ]
                    }
                ]
            }
        };

        // Compliance Training by persona
        const complianceTraining = {
            sales: [
                { title: "Customer Data Privacy (GDPR/CCPA)", status: "overdue", dueDate: "2025-07-30", priority: "critical" },
                { title: "Ethical Sales Practices", status: "current", dueDate: "2025-08-15", priority: "required" },
                { title: "Anti-Discrimination Training", status: "completed", dueDate: "2025-06-01", priority: "required" },
                { title: "Finance & Insurance Compliance", status: "upcoming", dueDate: "2025-09-01", priority: "required" }
            ],
            technician: [
                { title: "Workshop Safety Protocols", status: "current", dueDate: "2025-08-01", priority: "critical" },
                { title: "Hazardous Materials Handling", status: "overdue", dueDate: "2025-07-25", priority: "critical" },
                { title: "Environmental Waste Management", status: "completed", dueDate: "2025-05-15", priority: "required" },
                { title: "Equipment Safety Certification", status: "upcoming", dueDate: "2025-08-30", priority: "required" }
            ],
            manager: [
                { title: "Anti-Harassment & Discrimination", status: "completed", dueDate: "2025-06-15", priority: "critical" },
                { title: "Fair Labor Standards", status: "current", dueDate: "2025-08-10", priority: "required" },
                { title: "Privacy Law Compliance", status: "upcoming", dueDate: "2025-08-25", priority: "required" },
                { title: "Incident Investigation", status: "upcoming", dueDate: "2025-09-15", priority: "required" }
            ]
        };

        // Course data with registration options
        const courses = [
            {
                id: 1,
                title: "Advanced Diagnostic Systems",
                category: "technical",
                description: "Master the latest diagnostic tools and techniques for modern vehicles",
                deliveryMethod: "hybrid",
                sessions: [
                    {
                        id: 101,
                        type: "in-person",
                        date: "2025-08-15",
                        time: "9:00 AM - 12:00 PM",
                        location: "Downtown Training Center",
                        distance: "2.1 miles",
                        instructor: "Mike Chen",
                        capacity: 15,
                        enrolled: 15,
                        waitlist: 3,
                        status: "full"
                    },
                    {
                        id: 102,
                        type: "online",
                        date: "2025-08-18",
                        time: "2:00 PM - 5:00 PM",
                        location: "Virtual Classroom",
                        distance: "Online",
                        instructor: "Mike Chen",
                        capacity: 50,
                        enrolled: 23,
                        waitlist: 0,
                        status: "available"
                    }
                ],
                topics: ["Engine Diagnostics", "Electronic Systems", "Troubleshooting"],
                prerequisites: ["Basic Automotive Knowledge"],
                duration: "3 hours",
                aiRecommended: true
            },
            {
                id: 2,
                title: "Customer Service Excellence",
                category: "sales",
                description: "Enhance your customer interaction skills and boost satisfaction scores",
                deliveryMethod: "hybrid",
                sessions: [
                    {
                        id: 201,
                        type: "in-person",
                        date: "2025-08-12",
                        time: "1:00 PM - 4:00 PM",
                        location: "Westside Training Hub",
                        distance: "5.8 miles",
                        instructor: "Sarah Johnson",
                        capacity: 20,
                        enrolled: 12,
                        waitlist: 0,
                        status: "available"
                    },
                    {
                        id: 202,
                        type: "online",
                        date: "2025-08-14",
                        time: "10:00 AM - 1:00 PM",
                        location: "Virtual Classroom",
                        distance: "Online",
                        instructor: "Sarah Johnson",
                        capacity: 40,
                        enrolled: 18,
                        waitlist: 0,
                        status: "available"
                    }
                ],
                topics: ["Communication Skills", "Conflict Resolution", "Sales Techniques"],
                prerequisites: [],
                duration: "3 hours",
                aiRecommended: false
            },
            {
                id: 3,
                title: "Leadership Development Program",
                category: "leadership",
                description: "Build essential leadership skills for team management and growth",
                deliveryMethod: "in-person",
                sessions: [
                    {
                        id: 301,
                        type: "in-person",
                        date: "2025-08-20",
                        time: "9:00 AM - 5:00 PM",
                        location: "Executive Training Center",
                        distance: "8.2 miles",
                        instructor: "Robert Davis",
                        capacity: 12,
                        enrolled: 8,
                        waitlist: 0,
                        status: "available"
                    }
                ],
                topics: ["Team Building", "Strategic Planning", "Performance Management"],
                prerequisites: ["Management Experience"],
                duration: "8 hours",
                aiRecommended: true
            },
            {
                id: 4,
                title: "Digital Marketing Fundamentals",
                category: "sales",
                description: "Learn digital marketing strategies to enhance customer reach",
                deliveryMethod: "online",
                sessions: [
                    {
                        id: 401,
                        type: "online",
                        date: "2025-08-16",
                        time: "9:00 AM - 12:00 PM",
                        location: "Virtual Classroom",
                        distance: "Online",
                        instructor: "Jessica Park",
                        capacity: 60,
                        enrolled: 25,
                        waitlist: 0,
                        status: "available"
                    }
                ],
                topics: ["Social Media Marketing", "SEO Basics", "Content Strategy"],
                prerequisites: [],
                duration: "3 hours",
                aiRecommended: false
            },
            {
                id: 5,
                title: "Safety Compliance Training",
                category: "compliance",
                description: "Essential safety protocols and regulatory compliance requirements",
                deliveryMethod: "hybrid",
                sessions: [
                    {
                        id: 501,
                        type: "in-person",
                        date: "2025-08-10",
                        time: "8:00 AM - 12:00 PM",
                        location: "Safety Training Facility",
                        distance: "3.5 miles",
                        instructor: "Marcus Williams",
                        capacity: 25,
                        enrolled: 20,
                        waitlist: 0,
                        status: "available"
                    },
                    {
                        id: 502,
                        type: "online",
                        date: "2025-08-13",
                        time: "1:00 PM - 5:00 PM",
                        location: "Virtual Classroom",
                        distance: "Online",
                        instructor: "Marcus Williams",
                        capacity: 100,
                        enrolled: 45,
                        waitlist: 0,
                        status: "available"
                    }
                ],
                topics: ["OSHA Guidelines", "Workplace Safety", "Emergency Procedures"],
                prerequisites: [],
                duration: "4 hours",
                aiRecommended: true
            }
        ];

        // User registrations data
        let userRegistrations = [
            {
                courseId: 2,
                sessionId: 201,
                status: "confirmed",
                registrationDate: "2025-07-20",
                completionStatus: "upcoming"
            },
            {
                courseId: 1,
                sessionId: 101,
                status: "waitlisted",
                registrationDate: "2025-07-22",
                completionStatus: "waiting"
            }
        ];

        // #################### GLOBAL STATE ####################
        let currentPersona = 'sales';
        let currentSection = 'dashboard';
        let notifications = [];
        
        // #################### CORE LOGIC ####################
        
        function switchPersona() {
            const selector = document.getElementById('personaSwitcher');
            currentPersona = selector.value;
            const persona = personaData[currentPersona];
            
            document.getElementById('userName').textContent = persona.name;
            document.getElementById('userRole').textContent = persona.role;
            document.getElementById('userAvatar').textContent = persona.avatar;
            document.getElementById('dashboardUserName').textContent = persona.name.split(' ')[0];
            
            // Refresh current section content
            showSection(currentSection, document.querySelector(`.nav-item[onclick*="'${currentSection}'"]`));
        }

        function showSection(sectionName, element) {
            currentSection = sectionName;
            
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            if (element) element.classList.add('active');

            document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
            
            const sectionContainer = document.getElementById(sectionName);
            if (!sectionContainer) return;

            // Load section-specific content
            if (sectionName === 'course-catalog') {
                loadCourseCatalog();
            } else if (sectionName === 'my-registrations') {
                loadMyRegistrations();
            } else if (sectionName === 'recommendations') {
                loadRecommendations();
            } else if (sectionName === 'learning-path') {
                loadLearningPath();
            } else if (sectionName === 'training-gaps') {
                loadComplianceTraining();
            } else if (sectionName === 'user-profile') {
                loadUserProfile();
            }

            sectionContainer.classList.add('active');
        }

        function loadRecommendations() {
            const recommendationsList = document.getElementById('recommendations-list');
            const recommendations = aiRecommendations[currentPersona] || [];
            
            recommendationsList.innerHTML = '';
            
            if (recommendations.length === 0) {
                recommendationsList.innerHTML = `
                    <div class="card">
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">🤖</div>
                            <h3 style="color: #64748b; margin-bottom: 1rem;">AI is analyzing your profile</h3>
                            <p style="color: #9ca3af;">Personalized recommendations will appear as you complete more training</p>
                        </div>
                    </div>
                `;
                return;
            }

            recommendations.forEach(rec => {
                const recElement = document.createElement('div');
                recElement.className = 'course-item';
                
                const priorityBadge = rec.priority === 'high' ? 
                    '<span class="course-badge" style="background: #fee2e2; color: #dc2626;">🔥 High Priority</span>' :
                    '<span class="course-badge" style="background: #fef3c7; color: #d97706;">📋 Recommended</span>';

                recElement.innerHTML = `
                    <div class="course-header">
                        <div>
                            <h3 class="course-title">${rec.title}</h3>
                            <div style="margin-bottom: 0.5rem;">
                                <span class="course-badge" style="background: #f3e8ff; color: #7c3aed;">🤖 AI Recommended</span>
                                ${priorityBadge}
                            </div>
                            <p style="color: #64748b; margin-bottom: 1rem;">${rec.overview}</p>
                        </div>
                    </div>
                    
                    <div class="course-details">
                        <div class="detail-item">
                            <span class="detail-icon">⏱️</span>
                            <span>Duration: ${rec.estimatedTime}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">📱</span>
                            <span>Format: ${rec.format}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">🎯</span>
                            <span>Priority: ${rec.priority.charAt(0).toUpperCase() + rec.priority.slice(1)}</span>
                        </div>
                    </div>
                    
                    <div style="background: #f0f9ff; border-radius: 6px; padding: 1rem; margin: 1rem 0; border-left: 4px solid #3b82f6;">
                        <p style="color: #1e40af; margin: 0; font-size: 0.9rem;">
                            <strong>Why this matters:</strong> ${rec.relevance}
                        </p>
                    </div>
                    
                    <div class="course-actions">
                        <button class="btn btn-secondary" onclick="addToLearningPath('${rec.title}')">
                            ➕ Add to Path
                        </button>
                        <button class="btn btn-primary" onclick="findRelatedCourses('${rec.title}')">
                            🔍 Find Related Courses
                        </button>
                    </div>
                `;
                
                recommendationsList.appendChild(recElement);
            });
        }

        function loadLearningPath() {
            const learningPathContent = document.getElementById('learning-path-content');
            const pathData = learningPaths[currentPersona];
            
            if (!pathData) {
                learningPathContent.innerHTML = `
                    <div class="card">
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">🛤️</div>
                            <h3 style="color: #64748b; margin-bottom: 1rem;">Learning path being customized</h3>
                            <p style="color: #9ca3af;">Your personalized learning journey will be available soon</p>
                        </div>
                    </div>
                `;
                return;
            }

            learningPathContent.innerHTML = `
                <div class="card card-full">
                    <h3 class="card-title">${pathData.title}</h3>
                    <p style="color: #64748b; margin-bottom: 2rem;">${pathData.description}</p>
                    
                    ${pathData.levels.map((level, levelIndex) => `
                        <div style="margin-bottom: 2rem;">
                            <h4 style="color: #4f46e5; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #e2e8f0;">
                                ${level.name} Level
                            </h4>
                            
                            <div style="display: flex; flex-direction: column; gap: 1rem;">
                                ${level.courses.map((course, courseIndex) => `
                                    <div class="course-item" style="border-left: 4px solid ${
                                        course.status === 'completed' ? '#10b981' :
                                        course.status === 'current' ? '#f59e0b' :
                                        course.status === 'pending' ? '#3b82f6' : '#9ca3af'
                                    };">
                                        <div style="display: flex; align-items: center; gap: 1rem;">
                                            <div style="width: 40px; height: 40px; border-radius: 50%; background: ${
                                                course.status === 'completed' ? '#10b981' :
                                                course.status === 'current' ? '#f59e0b' :
                                                course.status === 'pending' ? '#3b82f6' : '#9ca3af'
                                            }; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold;">
                                                ${course.status === 'completed' ? '✓' : 
                                                  course.status === 'current' ? levelIndex + 1 + '.' + (courseIndex + 1) :
                                                  course.status === 'pending' ? levelIndex + 1 + '.' + (courseIndex + 1) : '🔒'}
                                            </div>
                                            
                                            <div style="flex: 1;">
                                                <h5 style="color: #1e293b; margin-bottom: 0.25rem;">${course.title}</h5>
                                                <div style="font-size: 0.9rem; color: #64748b;">
                                                    Status: ${course.status.charAt(0).toUpperCase() + course.status.slice(1)}
                                                    ${course.progress > 0 ? ` • ${course.progress}% complete` : ''}
                                                </div>
                                                ${course.status === 'current' && course.progress > 0 ? `
                                                    <div class="progress-bar" style="margin-top: 0.5rem;">
                                                        <div class="progress-fill progress-orange" style="width: ${course.progress}%;"></div>
                                                    </div>
                                                ` : ''}
                                            </div>
                                            
                                            <div class="course-actions">
                                                ${course.status === 'current' ? 
                                                    '<button class="btn btn-primary" onclick="continueCourse(\'' + course.title + '\')">📖 Continue</button>' :
                                                  course.status === 'pending' ?
                                                    '<button class="btn btn-secondary" onclick="startCourse(\'' + course.title + '\')">▶️ Start</button>' :
                                                  course.status === 'completed' ?
                                                    '<button class="btn btn-secondary" onclick="reviewCourse(\'' + course.title + '\')">👁️ Review</button>' :
                                                    '<button class="btn btn-secondary" disabled>🔒 Locked</button>'
                                                }
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function loadComplianceTraining() {
            const complianceList = document.getElementById('compliance-training-list');
            const trainings = complianceTraining[currentPersona] || [];
            
            complianceList.innerHTML = '';
            
            if (trainings.length === 0) {
                complianceList.innerHTML = `
                    <div class="card">
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">✅</div>
                            <h3 style="color: #64748b; margin-bottom: 1rem;">All compliance training up to date</h3>
                            <p style="color: #9ca3af;">Great job maintaining your compliance requirements!</p>
                        </div>
                    </div>
                `;
                return;
            }

            // Group by status
            const overdueTrainings = trainings.filter(t => t.status === 'overdue');
            const currentTrainings = trainings.filter(t => t.status === 'current');
            const upcomingTrainings = trainings.filter(t => t.status === 'upcoming');
            const completedTrainings = trainings.filter(t => t.status === 'completed');

            if (overdueTrainings.length > 0) {
                complianceList.innerHTML += `<h3 style="color: #dc2626; margin-bottom: 1rem;">🚨 Overdue (Action Required)</h3>`;
                overdueTrainings.forEach(training => {
                    complianceList.appendChild(createComplianceTrainingCard(training));
                });
            }

            if (currentTrainings.length > 0) {
                complianceList.innerHTML += `<h3 style="color: #f59e0b; margin-bottom: 1rem;">⏰ Due Soon</h3>`;
                currentTrainings.forEach(training => {
                    complianceList.appendChild(createComplianceTrainingCard(training));
                });
            }

            if (upcomingTrainings.length > 0) {
                complianceList.innerHTML += `<h3 style="color: #3b82f6; margin-bottom: 1rem;">📅 Upcoming</h3>`;
                upcomingTrainings.forEach(training => {
                    complianceList.appendChild(createComplianceTrainingCard(training));
                });
            }

            if (completedTrainings.length > 0) {
                complianceList.innerHTML += `<h3 style="color: #10b981; margin-bottom: 1rem;">✅ Completed</h3>`;
                completedTrainings.forEach(training => {
                    complianceList.appendChild(createComplianceTrainingCard(training));
                });
            }
        }

        function createComplianceTrainingCard(training) {
            const div = document.createElement('div');
            div.className = 'course-item';
            
            const statusBadge = training.status === 'overdue' ? 
                '<span class="course-badge" style="background: #fee2e2; color: #dc2626;">🚨 Overdue</span>' :
                training.status === 'current' ?
                '<span class="course-badge" style="background: #fef3c7; color: #d97706;">⏰ Due Soon</span>' :
                training.status === 'upcoming' ?
                '<span class="course-badge" style="background: #dbeafe; color: #1e40af;">📅 Upcoming</span>' :
                '<span class="course-badge" style="background: #dcfce7; color: #166534;">✅ Completed</span>';
            
            const priorityBadge = training.priority === 'critical' ?
                '<span class="course-badge" style="background: #fee2e2; color: #dc2626;">🔥 Critical</span>' :
                '<span class="course-badge" style="background: #fef3c7; color: #d97706;">📋 Required</span>';

            const actionButton = training.status === 'completed' ?
                '<button class="btn btn-secondary" onclick="viewCertificate(\'' + training.title + '\')">📜 View Certificate</button>' :
                '<button class="btn btn-primary" onclick="startComplianceTraining(\'' + training.title + '\')">📚 Start Training</button>';

            div.innerHTML = `
                <div class="course-header">
                    <div>
                        <h3 class="course-title">${training.title}</h3>
                        <div style="margin-bottom: 0.5rem;">
                            ${statusBadge}
                            ${priorityBadge}
                        </div>
                    </div>
                </div>
                
                <div class="course-details">
                    <div class="detail-item">
                        <span class="detail-icon">📅</span>
                        <span>Due Date: ${new Date(training.dueDate).toLocaleDateString()}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-icon">⚖️</span>
                        <span>Type: Compliance Required</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-icon">🎯</span>
                        <span>Priority: ${training.priority.charAt(0).toUpperCase() + training.priority.slice(1)}</span>
                    </div>
                </div>
                
                <div class="course-actions">
                    ${actionButton}
                    <button class="btn btn-secondary" onclick="requestExtension('${training.title}')">
                        📝 Request Extension
                    </button>
                </div>
            `;
            
            return div;
        }

        function loadUserProfile() {
            const userProfileContent = document.getElementById('user-profile-content');
            const persona = personaData[currentPersona];
            
            userProfileContent.innerHTML = `
                <div class="card card-full">
                    <div style="display: flex; flex-wrap: wrap; gap: 2rem; align-items: start;">
                        <div style="width: 120px; height: 120px; border-radius: 16px; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem; font-weight: bold; flex-shrink:0;">
                            ${persona.avatar}
                        </div>
                        
                        <div style="flex: 1; min-width: 300px;">
                            <h2 style="font-size: 2rem; font-weight: bold; color: #1e293b; margin-bottom: 0.5rem;">${persona.name}</h2>
                            <p style="color: #64748b; font-size: 1.1rem; margin-bottom: 1rem;">${persona.role} • ${persona.department}</p>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                                <div>
                                    <div style="font-size: 0.85rem; color: #64748b; margin-bottom: 2px;">Email</div>
                                    <div style="font-weight: 600;">${persona.email}</div>
                                </div>
                                <div>
                                    <div style="font-size: 0.85rem; color: #64748b; margin-bottom: 2px;">Manager</div>
                                    <div style="font-weight: 600;">${persona.manager}</div>
                                </div>
                                <div>
                                    <div style="font-size: 0.85rem; color: #64748b; margin-bottom: 2px;">Performance</div>
                                    <div style="font-weight: 600; color: #059669;">${persona.performance}</div>
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 1rem; flex-wrap:wrap;">
                                <button class="btn btn-primary" onclick="editProfile()">✏️ Edit Profile</button>
                                <button class="btn btn-secondary" onclick="viewAchievements()">🏆 View Achievements</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #dcfce7; color: #166534;">🎓</div>
                            <div class="card-title">Current Skills</div>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                                    <span style="font-size: 0.9rem; font-weight: 500;">Communication</span>
                                    <span style="color: #059669; font-size: 0.85rem;">✅ Expert</span>
                                </div>
                                <div class="progress-bar" style="height: 6px;">
                                    <div class="progress-fill progress-green" style="width: 92%;"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                                    <span style="font-size: 0.9rem; font-weight: 500;">Technical Knowledge</span>
                                    <span style="color: #059669; font-size: 0.85rem;">✅ Proficient</span>
                                </div>
                                <div class="progress-bar" style="height: 6px;">
                                    <div class="progress-fill progress-blue" style="width: 78%;"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                                    <span style="font-size: 0.9rem; font-weight: 500;">Leadership</span>
                                    <span style="color: #d97706; font-size: 0.85rem;">📈 Developing</span>
                                </div>
                                <div class="progress-bar" style="height: 6px;">
                                    <div class="progress-fill progress-orange" style="width: 65%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon" style="background: #fef3c7; color: #d97706;">🏅</div>
                            <div class="card-title">Achievements & Badges</div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 8px; text-align: center;">
                            <div style="padding: 8px; background: #fef3c7; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 4px;">🥇</div>
                                <div style="font-size: 0.75rem; font-weight: 600;">Top Learner</div>
                            </div>
                            <div style="padding: 8px; background: #dcfce7; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 4px;">🎯</div>
                                <div style="font-size: 0.75rem; font-weight: 600;">Goal Crusher</div>
                            </div>
                            <div style="padding: 8px; background: #dbeafe; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 4px;">⚡</div>
                                <div style="font-size: 0.75rem; font-weight: 600;">Fast Finisher</div>
                            </div>
                            <div style="padding: 8px; background: #f3e8ff; border-radius: 8px;">
                                <div style="font-size: 1.5rem; margin-bottom: 4px;">🤝</div>
                                <div style="font-size: 0.75rem; font-weight: 600;">Team Player</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Placeholder functions for actions
        function addToLearningPath(courseTitle) {
            showNotification(`📚 "${courseTitle}" added to your learning path!`, 'info');
        }

        function findRelatedCourses(courseTitle) {
            showNotification(`🔍 Searching for courses related to "${courseTitle}"...`, 'info');
            showSection('course-catalog', document.querySelector('[onclick*="course-catalog"]'));
        }

        function continueCourse(courseTitle) {
            showNotification(`📖 Continuing "${courseTitle}"...`, 'info');
        }

        function startCourse(courseTitle) {
            showNotification(`▶️ Starting "${courseTitle}"...`, 'info');
        }

        function reviewCourse(courseTitle) {
            showNotification(`👁️ Opening review for "${courseTitle}"...`, 'info');
        }

        function startComplianceTraining(trainingTitle) {
            showNotification(`📚 Starting compliance training: "${trainingTitle}"...`, 'info');
        }

        function requestExtension(trainingTitle) {
            showNotification(`📝 Extension request submitted for "${trainingTitle}"`, 'warning');
        }

        function editProfile() {
            showNotification(`✏️ Opening profile editor...`, 'info');
        }

        function viewAchievements() {
            showNotification(`🏆 Loading achievements gallery...`, 'info');
        }

        function loadCourseCatalog() {
            const courseList = document.getElementById('courseList');
            courseList.innerHTML = '';

            courses.forEach(course => {
                const courseElement = createCourseElement(course);
                courseList.appendChild(courseElement);
            });
        }

        function createCourseElement(course) {
            const div = document.createElement('div');
            div.className = `course-item ${course.deliveryMethod}`;
            
            const deliveryBadgeClass = course.deliveryMethod === 'online' ? 'badge-online' : 
                                     course.deliveryMethod === 'in-person' ? 'badge-in-person' : 'badge-hybrid';
            
            div.innerHTML = `
                <div class="course-header">
                    <div>
                        <h3 class="course-title">${course.title}</h3>
                        <div style="margin-bottom: 0.5rem;">
                            <span class="course-badge ${deliveryBadgeClass}">
                                ${course.deliveryMethod === 'online' ? '💻 Online' : 
                                  course.deliveryMethod === 'in-person' ? '🏢 In-Person' : '🔄 Hybrid'}
                            </span>
                            ${course.aiRecommended ? '<span class="course-badge" style="background: #fef3c7; color: #d97706;">🤖 AI Recommended</span>' : ''}
                        </div>
                        <p style="color: #64748b; margin-bottom: 1rem;">${course.description}</p>
                    </div>
                </div>
                
                <div class="course-details">
                    <div class="detail-item">
                        <span class="detail-icon">📚</span>
                        <span>Category: ${course.category.charAt(0).toUpperCase() + course.category.slice(1)}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-icon">⏱️</span>
                        <span>Duration: ${course.duration}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-icon">🎯</span>
                        <span>Topics: ${course.topics.slice(0, 2).join(', ')}${course.topics.length > 2 ? '...' : ''}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-icon">📋</span>
                        <span>Sessions: ${course.sessions.length} available</span>
                    </div>
                </div>
                
                <div class="course-actions">
                    <button class="btn btn-secondary" onclick="viewCourseDetails(${course.id})">
                        📋 View Details
                    </button>
                    <button class="btn btn-primary" onclick="showRegistrationOptions(${course.id})">
                        ✏️ Register
                    </button>
                </div>
            `;
            
            return div;
        }

        function showRegistrationOptions(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (!course) return;

            const modal = document.getElementById('registration-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');

            modalTitle.textContent = `Register for ${course.title}`;
            
            modalBody.innerHTML = `
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: #1e293b; margin-bottom: 0.5rem;">Choose Your Session:</h4>
                    <p style="color: #64748b; font-size: 0.9rem;">${course.description}</p>
                </div>
                
                <div id="session-options">
                    ${course.sessions.map(session => `
                        <div class="alternative-item" style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">
                                <div style="flex: 1;">
                                    <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem;">
                                        <span class="course-badge ${session.type === 'online' ? 'badge-online' : 'badge-in-person'}">
                                            ${session.type === 'online' ? '💻 Online' : '🏢 In-Person'}
                                        </span>
                                        <span class="course-badge ${session.status === 'available' ? 'badge-available' : session.status === 'full' ? 'badge-full' : 'badge-waitlist'}">
                                            ${session.status === 'available' ? '✅ Available' : session.status === 'full' ? '❌ Full' : '⏳ Waitlist'}
                                        </span>
                                    </div>
                                    
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem; font-size: 0.9rem; color: #64748b;">
                                        <div class="detail-item">
                                            <span class="detail-icon">📅</span>
                                            <span>${session.date}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-icon">⏰</span>
                                            <span>${session.time}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-icon">📍</span>
                                            <span>${session.location} ${session.distance !== 'Online' ? `(${session.distance})` : ''}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-icon">👨‍🏫</span>
                                            <span>${session.instructor}</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-icon">👥</span>
                                            <span>${session.enrolled}/${session.capacity} enrolled</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <button class="btn ${session.status === 'available' ? 'btn-success' : session.status === 'full' ? 'btn-warning' : 'btn-secondary'}" 
                                        onclick="registerForSession(${courseId}, ${session.id})"
                                        style="margin-left: 1rem;">
                                    ${session.status === 'available' ? '✅ Register' : session.status === 'full' ? '📝 Join Waitlist' : '⏳ Waitlist'}
                                </button>
                            </div>
                            
                            ${session.status === 'full' && session.waitlist > 0 ? `
                                <div style="background: #fef3c7; border-radius: 6px; padding: 0.75rem; font-size: 0.9rem;">
                                    <strong>🤖 AI Suggestion:</strong> This session is full with ${session.waitlist} on waitlist. 
                                    Consider the ${session.type === 'online' ? 'in-person' : 'online'} option or we can suggest similar courses.
                                </div>
                            ` : ''}
                        </div>
                    `).join('')}
                </div>
                
                <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid #e2e8f0;">
                    <h5 style="color: #374151; margin-bottom: 0.75rem;">🤖 AI Registration Assistant</h5>
                    <div style="background: #f0f9ff; border-radius: 6px; padding: 1rem; font-size: 0.9rem; color: #0c4a6e;">
                        <ul style="margin: 0; padding-left: 1.25rem;">
                            <li>Automatic calendar integration and reminders</li>
                            <li>Instructor notification and updated roster</li>
                            <li>Real-time updates if session details change</li>
                            <li>Alternative suggestions if sessions become full</li>
                        </ul>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 1.5rem;">
                    <button class="btn btn-secondary" onclick="closeRegistrationModal()">Cancel</button>
                </div>
            `;
            
            modal.classList.add('active');
        }

        function registerForSession(courseId, sessionId) {
            const course = courses.find(c => c.id === courseId);
            const session = course.sessions.find(s => s.id === sessionId);
            
            if (!course || !session) return;

            if (session.status === 'full') {
                // Handle waitlist registration
                showWaitlistModal(course, session);
            } else {
                // Handle regular registration
                confirmRegistration(course, session);
            }
        }

        function confirmRegistration(course, session) {
            // Simulate registration process
            const registration = {
                courseId: course.id,
                sessionId: session.id,
                status: "confirmed",
                registrationDate: new Date().toISOString().split('T')[0],
                completionStatus: "upcoming"
            };
            
            userRegistrations.push(registration);
            
            // Update session enrollment
            session.enrolled += 1;
            if (session.enrolled >= session.capacity) {
                session.status = 'full';
            }
            
            closeRegistrationModal();
            showNotification(`✅ Successfully registered for "${course.title}" - ${session.type} session on ${session.date}!`, 'success');
            
            // Show success modal
            setTimeout(() => {
                showSuccessModal(course, session);
            }, 500);
        }

        function showWaitlistModal(course, session) {
            const modal = document.getElementById('registration-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');

            modalTitle.textContent = `Join Waitlist - ${course.title}`;
            
            // Generate AI alternatives
            const alternatives = generateAlternatives(course, session);
            
            modalBody.innerHTML = `
                <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;">
                    <h4 style="color: #92400e; margin-bottom: 0.5rem;">⚠️ Session Full</h4>
                    <p style="color: #92400e; margin: 0;">
                        The ${session.type} session on ${session.date} is currently full 
                        (${session.enrolled}/${session.capacity} enrolled, ${session.waitlist} on waitlist).
                    </p>
                </div>
                
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: #374151; margin-bottom: 1rem;">🤖 AI-Recommended Alternatives</h4>
                    <p style="color: #64748b; font-size: 0.9rem; margin-bottom: 1rem;">
                        Our AI has found these alternatives based on your preferences, schedule, and learning goals:
                    </p>
                    
                    <div class="alternatives-list">
                        ${alternatives.map((alt, index) => `
                            <div class="alternative-item">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">
                                    <div style="flex: 1;">
                                        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem;">
                                            <span class="ai-score">AI Match: ${alt.score}%</span>
                                            <span class="course-badge ${alt.type === 'online' ? 'badge-online' : 'badge-in-person'}">
                                                ${alt.type === 'online' ? '💻 Online' : '🏢 In-Person'}
                                            </span>
                                            <span class="course-badge badge-available">✅ Available</span>
                                        </div>
                                        
                                        <h5 style="color: #1e293b; margin-bottom: 0.5rem;">${alt.title}</h5>
                                        
                                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.5rem; font-size: 0.9rem; color: #64748b; margin-bottom: 0.75rem;">
                                            <div class="detail-item">
                                                <span class="detail-icon">📅</span>
                                                <span>${alt.date}</span>
                                            </div>
                                            <div class="detail-item">
                                                <span class="detail-icon">⏰</span>
                                                <span>${alt.time}</span>
                                            </div>
                                            <div class="detail-item">
                                                <span class="detail-icon">📍</span>
                                                <span>${alt.location}</span>
                                            </div>
                                            <div class="detail-item">
                                                <span class="detail-icon">👥</span>
                                                <span>${alt.enrolled}/${alt.capacity} enrolled</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <button class="btn btn-success" onclick="registerForSession(${alt.courseId}, ${alt.sessionId})" style="margin-left: 1rem;">
                                        ✅ Register
                                    </button>
                                </div>
                                
                                <div class="match-reasons">
                                    <p style="font-size: 0.9rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">Why this matches:</p>
                                    <ul style="margin: 0; padding-left: 1.25rem; color: #64748b;">
                                        ${alt.reasons.map(reason => `<li>${reason}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div style="display: flex; justify-content: space-between; gap: 1rem;">
                    <button class="btn btn-secondary" onclick="closeRegistrationModal()">
                        Cancel
                    </button>
                    <button class="btn btn-warning" onclick="joinWaitlist(${course.id}, ${session.id})">
                        📝 Join Original Waitlist
                    </button>
                </div>
            `;
        }

        function generateAlternatives(course, fullSession) {
            const alternatives = [];
            
            // Find other sessions of the same course
            course.sessions.forEach(session => {
                if (session.id !== fullSession.id && session.status === 'available') {
                    let score = 70; // Base score for same course
                    const reasons = [`Same course: "${course.title}"`];
                    
                    if (session.type !== fullSession.type) {
                        reasons.push(`Different delivery method (${session.type} vs ${fullSession.type})`);
                        score += 10;
                    }
                    
                    // Date proximity
                    const daysDiff = Math.abs(new Date(session.date) - new Date(fullSession.date)) / (1000 * 60 * 60 * 24);
                    if (daysDiff <= 7) {
                        score += 15;
                        reasons.push(`Similar timing (${Math.round(daysDiff)} days difference)`);
                    }
                    
                    alternatives.push({
                        ...session,
                        courseId: course.id,
                        sessionId: session.id,
                        title: course.title,
                        score: Math.min(score, 95),
                        reasons: reasons
                    });
                }
            });
            
            // Find similar courses
            courses.forEach(otherCourse => {
                if (otherCourse.id !== course.id && otherCourse.category === course.category) {
                    otherCourse.sessions.forEach(session => {
                        if (session.status === 'available') {
                            let score = 45; // Base score for similar course
                            const reasons = [`Similar category: ${course.category}`];
                            
                            // Topic overlap
                            const commonTopics = course.topics.filter(topic => 
                                otherCourse.topics.some(otherTopic => 
                                    topic.toLowerCase().includes(otherTopic.toLowerCase()) || 
                                    otherTopic.toLowerCase().includes(topic.toLowerCase())
                                )
                            );
                            
                            if (commonTopics.length > 0) {
                                score += commonTopics.length * 10;
                                reasons.push(`Related topics: ${commonTopics.join(', ')}`);
                            }
                            
                            // Same delivery method preference
                            if (session.type === fullSession.type) {
                                score += 10;
                                reasons.push(`Same delivery method (${session.type})`);
                            }
                            
                            alternatives.push({
                                ...session,
                                courseId: otherCourse.id,
                                sessionId: session.id,
                                title: otherCourse.title,
                                score: Math.min(score, 85),
                                reasons: reasons
                            });
                        }
                    });
                }
            });
            
            return alternatives
                .sort((a, b) => b.score - a.score)
                .slice(0, 3);
        }

        function joinWaitlist(courseId, sessionId) {
            const course = courses.find(c => c.id === courseId);
            const session = course.sessions.find(s => s.id === sessionId);
            
            const registration = {
                courseId: courseId,
                sessionId: sessionId,
                status: "waitlisted",
                registrationDate: new Date().toISOString().split('T')[0],
                completionStatus: "waiting"
            };
            
            userRegistrations.push(registration);
            session.waitlist += 1;
            
            closeRegistrationModal();
            showNotification(`📝 Added to waitlist for "${course.title}". You'll be notified if a spot opens!`, 'warning');
        }

        function showSuccessModal(course, session) {
            const modal = document.getElementById('registration-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');

            modalTitle.textContent = "Registration Successful! 🎉";
            
            modalBody.innerHTML = `
                <div style="text-align: center; margin-bottom: 2rem;">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">✅</div>
                    <h3 style="color: #166534; margin-bottom: 1rem;">You're all set!</h3>
                    <p style="color: #64748b; font-size: 1.1rem;">
                        Successfully registered for <strong>"${course.title}"</strong>
                    </p>
                </div>
                
                <div style="background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <h4 style="color: #166534; margin-bottom: 1rem;">📋 Session Details</h4>
                    <div style="display: grid; gap: 0.75rem; color: #166534;">
                        <div class="detail-item">
                            <span class="detail-icon">📅</span>
                            <span><strong>Date:</strong> ${session.date}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">⏰</span>
                            <span><strong>Time:</strong> ${session.time}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">📍</span>
                            <span><strong>Location:</strong> ${session.location}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">👨‍🏫</span>
                            <span><strong>Instructor:</strong> ${session.instructor}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">💻</span>
                            <span><strong>Format:</strong> ${session.type === 'online' ? 'Online Virtual Session' : 'In-Person Training'}</span>
                        </div>
                    </div>
                </div>
                
                <div style="background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <h4 style="color: #1e40af; margin-bottom: 1rem;">🤖 What happens next:</h4>
                    <ul style="color: #1e40af; margin: 0; padding-left: 1.25rem;">
                        <li>✅ Confirmation email sent to your inbox</li>
                        <li>📅 Event automatically added to your calendar</li>
                        <li>👨‍🏫 Instructor notified of your registration</li>
                        <li>⏰ Automated reminders scheduled (24hr & 2hr before)</li>
                        <li>📱 SMS notifications for any session changes</li>
                        ${session.type === 'online' ? '<li>🔗 Virtual classroom link will be sent 1 hour before</li>' : '<li>🗺️ Directions and parking info sent 24 hours before</li>'}
                    </ul>
                </div>
                
                <div style="text-align: center;">
                    <button class="btn btn-primary" onclick="closeRegistrationModal()">
                        📚 Browse More Courses
                    </button>
                    <button class="btn btn-secondary" onclick="viewMyRegistrations()" style="margin-left: 0.5rem;">
                        📝 View My Registrations
                    </button>
                </div>
            `;
            
            modal.classList.add('active');
        }

        function loadMyRegistrations() {
            const registrationsList = document.getElementById('registrationsList');
            registrationsList.innerHTML = '';

            if (userRegistrations.length === 0) {
                registrationsList.innerHTML = `
                    <div class="card">
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">📚</div>
                            <h3 style="color: #64748b; margin-bottom: 1rem;">No registrations yet</h3>
                            <p style="color: #9ca3af; margin-bottom: 1.5rem;">Start your learning journey by exploring our course catalog</p>
                            <button class="btn btn-primary" onclick="showSection('course-catalog', document.querySelector('[onclick*=\"course-catalog\"]'))">
                                🔍 Browse Courses
                            </button>
                        </div>
                    </div>
                `;
                return;
            }

            const upcomingRegistrations = userRegistrations.filter(reg => reg.completionStatus === 'upcoming' || reg.completionStatus === 'waiting');
            const completedRegistrations = userRegistrations.filter(reg => reg.completionStatus === 'completed');

            if (upcomingRegistrations.length > 0) {
                registrationsList.innerHTML += `
                    <h3 style="color: white; margin-bottom: 1rem; margin-top: 1rem;">📅 Upcoming & Active</h3>
                `;

                upcomingRegistrations.forEach(registration => {
                    const course = courses.find(c => c.id === registration.courseId);
                    const session = course?.sessions.find(s => s.id === registration.sessionId);
                    
                    if (course && session) {
                        const registrationCard = createRegistrationCard(course, session, registration);
                        registrationsList.appendChild(registrationCard);
                    }
                });
            }

            if (completedRegistrations.length > 0) {
                registrationsList.innerHTML += `
                    <h3 style="color: white; margin-bottom: 1rem; margin-top: 2rem;">✅ Completed</h3>
                `;

                completedRegistrations.forEach(registration => {
                    const course = courses.find(c => c.id === registration.courseId);
                    const session = course?.sessions.find(s => s.id === registration.sessionId);
                    
                    if (course && session) {
                        const registrationCard = createRegistrationCard(course, session, registration);
                        registrationsList.appendChild(registrationCard);
                    }
                });
            }
        }

        function createRegistrationCard(course, session, registration) {
            const div = document.createElement('div');
            div.className = `course-item ${session.type}`;
            
            const statusBadge = registration.status === 'confirmed' ? 
                '<span class="course-badge badge-available">✅ Confirmed</span>' :
                registration.status === 'waitlisted' ?
                '<span class="course-badge badge-waitlist">⏳ Waitlisted</span>' :
                '<span class="course-badge" style="background: #dcfce7; color: #166534;">🏆 Completed</span>';
            
            const deliveryBadge = session.type === 'online' ? 
                '<span class="course-badge badge-online">💻 Online</span>' :
                '<span class="course-badge badge-in-person">🏢 In-Person</span>';
            
            const actionButtons = registration.status === 'waitlisted' ? 
                `<button class="btn btn-warning" onclick="viewWaitlistStatus(${registration.courseId}, ${registration.sessionId})">
                    📊 Check Waitlist Status
                </button>
                <button class="btn btn-secondary" onclick="cancelRegistration(${registration.courseId}, ${registration.sessionId})">
                    ❌ Cancel
                </button>` :
                registration.completionStatus === 'upcoming' ?
                `<button class="btn btn-primary" onclick="viewSessionDetails(${registration.courseId}, ${registration.sessionId})">
                    📋 Session Details
                </button>
                <button class="btn btn-secondary" onclick="cancelRegistration(${registration.courseId}, ${registration.sessionId})">
                    ❌ Cancel
                </button>` :
                `<button class="btn btn-secondary" onclick="viewCertificate(${registration.courseId}, ${registration.sessionId})">
                    🏆 View Certificate
                </button>
                <button class="btn btn-secondary" onclick="provideFeedback(${registration.courseId}, ${registration.sessionId})">
                    ⭐ Rate Course
                </button>`;
            
            div.innerHTML = `
                <div class="course-header">
                    <div>
                        <h3 class="course-title">${course.title}</h3>
                        <div style="margin-bottom: 0.5rem;">
                            ${statusBadge}
                            ${deliveryBadge}
                        </div>
                        <p style="color: #64748b; margin-bottom: 1rem;">Registered on ${new Date(registration.registrationDate).toLocaleDateString()}</p>
                    </div>
                </div>
                
                <div class="course-details">
                    <div class="detail-item">
                        <span class="detail-icon">📅</span>
                        <span>${session.date}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-icon">⏰</span>
                        <span>${session.time}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-icon">📍</span>
                        <span>${session.location}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-icon">👨‍🏫</span>
                        <span>${session.instructor}</span>
                    </div>
                </div>
                
                ${registration.status === 'waitlisted' ? `
                    <div style="background: #fef3c7; border-radius: 6px; padding: 1rem; margin: 1rem 0; font-size: 0.9rem;">
                        <strong>📍 Waitlist Position:</strong> You are #${Math.floor(Math.random() * 3) + 1} in line. 
                        We'll notify you immediately if a spot opens!
                    </div>
                ` : ''}
                
                <div class="course-actions">
                    ${actionButtons}
                </div>
            `;
            
            return div;
        }

        function viewMyRegistrations() {
            showSection('my-registrations', document.querySelector('[onclick*="my-registrations"]'));
            closeRegistrationModal();
        }

        function closeRegistrationModal() {
            document.getElementById('registration-modal').classList.remove('active');
        }

        function applyCourseFilters() {
            const searchTerm = document.getElementById('courseSearch').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            const deliveryFilter = document.getElementById('deliveryFilter').value;
            
            const filteredCourses = courses.filter(course => {
                const matchesSearch = course.title.toLowerCase().includes(searchTerm) || 
                                    course.description.toLowerCase().includes(searchTerm) ||
                                    course.topics.some(topic => topic.toLowerCase().includes(searchTerm));
                
                const matchesCategory = categoryFilter === 'all' || course.category === categoryFilter;
                
                const matchesDelivery = deliveryFilter === 'all' || 
                                      course.deliveryMethod === deliveryFilter ||
                                      (deliveryFilter === 'online' && course.sessions.some(s => s.type === 'online')) ||
                                      (deliveryFilter === 'in-person' && course.sessions.some(s => s.type === 'in-person')) ||
                                      (deliveryFilter === 'hybrid' && course.deliveryMethod === 'hybrid');
                
                return matchesSearch && matchesCategory && matchesDelivery;
            });
            
            const courseList = document.getElementById('courseList');
            courseList.innerHTML = '';
            
            if (filteredCourses.length === 0) {
                courseList.innerHTML = `
                    <div class="card">
                        <div style="text-align: center; padding: 2rem;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">🔍</div>
                            <h3 style="color: #64748b; margin-bottom: 1rem;">No courses found</h3>
                            <p style="color: #9ca3af; margin-bottom: 1.5rem;">Try adjusting your search filters</p>
                            <button class="btn btn-secondary" onclick="clearFilters()">
                                🗑️ Clear Filters
                            </button>
                        </div>
                    </div>
                `;
                return;
            }
            
            filteredCourses.forEach(course => {
                const courseElement = createCourseElement(course);
                courseList.appendChild(courseElement);
            });
        }

        function clearFilters() {
            document.getElementById('courseSearch').value = '';
            document.getElementById('categoryFilter').value = 'all';
            document.getElementById('deliveryFilter').value = 'all';
            loadCourseCatalog();
        }

        function viewCourseDetails(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (!course) return;

            const modal = document.getElementById('registration-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');

            modalTitle.textContent = course.title;
            
            modalBody.innerHTML = `
                <div style="margin-bottom: 1.5rem;">
                    <p style="color: #64748b; font-size: 1.1rem; line-height: 1.6;">${course.description}</p>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem;">
                    <div>
                        <h4 style="color: #374151; margin-bottom: 0.75rem;">📚 Course Information</h4>
                        <div style="space-y: 0.5rem;">
                            <div><strong>Category:</strong> ${course.category.charAt(0).toUpperCase() + course.category.slice(1)}</div>
                            <div><strong>Duration:</strong> ${course.duration}</div>
                            <div><strong>Delivery:</strong> ${course.deliveryMethod.charAt(0).toUpperCase() + course.deliveryMethod.slice(1)}</div>
                            <div><strong>Sessions:</strong> ${course.sessions.length} available</div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 style="color: #374151; margin-bottom: 0.75rem;">🎯 Learning Topics</h4>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                            ${course.topics.map(topic => `
                                <span class="course-badge" style="background: #f3f4f6; color: #374151;">${topic}</span>
                            `).join('')}
                        </div>
                    </div>
                </div>
                
                ${course.prerequisites && course.prerequisites.length > 0 ? `
                    <div style="background: #fef3c7; border-radius: 6px; padding: 1rem; margin-bottom: 1.5rem;">
                        <h4 style="color: #92400e; margin-bottom: 0.5rem;">⚠️ Prerequisites</h4>
                        <ul style="color: #92400e; margin: 0; padding-left: 1.25rem;">
                            ${course.prerequisites.map(prereq => `<li>${prereq}</li>`).join('')}
                        </ul>
                    </div>
                ` : ''}
                
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: #374151; margin-bottom: 1rem;">📅 Available Sessions</h4>
                    ${course.sessions.map(session => `
                        <div style="border: 1px solid #e2e8f0; border-radius: 6px; padding: 1rem; margin-bottom: 0.75rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                        <span class="course-badge ${session.type === 'online' ? 'badge-online' : 'badge-in-person'}">
                                            ${session.type === 'online' ? '💻 Online' : '🏢 In-Person'}
                                        </span>
                                        <span class="course-badge ${session.status === 'available' ? 'badge-available' : 'badge-full'}">
                                            ${session.status === 'available' ? '✅ Available' : '❌ Full'}
                                        </span>
                                    </div>
                                    <div style="font-size: 0.9rem; color: #64748b;">
                                        ${session.date} • ${session.time} • ${session.location}
                                    </div>
                                    <div style="font-size: 0.9rem; color: #64748b;">
                                        Instructor: ${session.instructor} • ${session.enrolled}/${session.capacity} enrolled
                                    </div>
                                </div>
                                <button class="btn ${session.status === 'available' ? 'btn-primary' : 'btn-warning'}" 
                                        onclick="registerForSession(${course.id}, ${session.id})">
                                    ${session.status === 'available' ? '✏️ Register' : '📝 Waitlist'}
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div style="text-align: center;">
                    <button class="btn btn-secondary" onclick="closeRegistrationModal()">Close</button>
                </div>
            `;
            
            modal.classList.add('active');
        }

        function showNotification(message, type = 'info') {
            const notificationBar = document.getElementById('notification-bar');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="background: none; border: none; font-size: 1.2rem; cursor: pointer; color: #64748b;">×</button>
                </div>
            `;
            
            notificationBar.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        // Additional placeholder functions for demonstration
        function viewWaitlistStatus(courseId, sessionId) {
            showNotification('🔍 Checking waitlist status...', 'info');
        }

        function cancelRegistration(courseId, sessionId) {
            if (confirm('Are you sure you want to cancel this registration?')) {
                userRegistrations = userRegistrations.filter(reg => 
                    !(reg.courseId === courseId && reg.sessionId === sessionId)
                );
                loadMyRegistrations();
                showNotification('❌ Registration cancelled successfully', 'warning');
            }
        }

        function viewSessionDetails(courseId, sessionId) {
            showNotification('📋 Loading session details...', 'info');
        }

        function viewCertificate(courseId, sessionId) {
            showNotification('🏆 Opening certificate...', 'info');
        }

        function provideFeedback(courseId, sessionId) {
            showNotification('⭐ Opening feedback form...', 'info');
        }

        // #################### INITIALIZATION ####################
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('personaSwitcher').value = 'sales';
            switchPersona();
            loadCourseCatalog();

            // Auto-apply filters when typing in search
            document.getElementById('courseSearch').addEventListener('input', () => {
                clearTimeout(window.searchTimeout);
                window.searchTimeout = setTimeout(applyCourseFilters, 500);
            });

            // Modal click outside to close
            document.addEventListener('click', e => {
                if (e.target === document.getElementById('registration-modal')) {
                    closeRegistrationModal();
                }
            });

            // Escape key to close modal
            document.addEventListener('keydown', e => {
                if (e.key === 'Escape') {
                    closeRegistrationModal();
                }
            });

            // Show some demo notifications
            setTimeout(() => {
                showNotification('🤖 AI Assistant ready! I can help you find the perfect training sessions.', 'info');
            }, 2000);

            setTimeout(() => {
                showNotification('📅 Reminder: You have "Customer Service Excellence" tomorrow at 1:00 PM!', 'warning');
            }, 4000);
        });
    </script>
</body>
</html>
